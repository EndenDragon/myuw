{% load templatetag_handlebars %}
    {% tplhandlebars "notices" %}

  <div class="notices-container container">
    
    <h1>Notices</h1>
    <span class="notice-count">{{ total_notices }} notices total</span>

    <div class="toggle">
      <a id="expand" class="disclosure_toggle">Expand all</a><a id="collapse" class="disclosure_toggle" style="display: none">Collapse all</a>
    </div>
    
    <!-- collapsy areas -->
    <div class="panel-group" id="accordion">
        {{ #if holds.notices }}
        <!-- collapsy 1: critical -->
        <div class="panel panel-default panel-critical">
            <!-- collapsy 1 header -->      
            <a data-toggle="collapse"  href="#collapseOne" aria-controls="collapseOne">
                <div class="panel-heading clearfix">
                	<div class="pull-left">
	                	<i class="fa fa-exclamation-triangle critical-icon"></i>
	                    <h3 class="panel-title">Critical</h3>
                	</div>
					<div class="pull-right">
                        {{ #if holds.unread_count }}
	                        <span class="badge">{{ holds.unread_count }} unread</span>
                        {{ /if }}
                        <i class="fa fa-angle-down fa-2x pull-right"></i>
					</div>
					<div class="panel-title-metadata">{{ holds.critical_count }} critical
					</div>
                </div>
            </a>
            <!-- collapsy 1 content -->
            <div id="collapseOne" class="panel-collapse collapse clearfix" aria-hidden="true">
                <div class="panel-body">
                    {{ #each holds.notices }}
                    <div class="notice-container {{ #unless is_read }}unread{{ /unless }}">
	                    <div class="inner-notice-container">
                            {{ #if is_critical }}
							<i class="fa fa-exclamation-triangle critical-icon"></i>
                            {{ /if }}
	                        <div class="notice-category">
	                            {{ category }}
	                        </div>
	                        <div class="notice-title">
	                            {{{ notice_content }}}
	                        </div>
	                    </div>
                    </div>
                    {{ /each }}
                </div>
            </div>
      </div>
      {{ /if }}
      <!-- end collapsy 1 -->
      
      {{ #if today.notices }}
      <!-- collapsy 2: today -->      
        <div class="panel panel-default">
            <!-- collapsy 2 header -->      
            <a data-toggle="collapse"  href="#collapseTwo" aria-controls="collapseTwo">
                <div class="panel-heading clearfix">
                	<div class="pull-left">
	                    <h3 class="panel-title">Today</h3>
                	</div>
					<div class="pull-right">
                        {{ #if today.unread_count }}
						 <span class="badge">{{ today.unread_count }} unread</span>
                        {{ /if }}
                        <i class="fa fa-angle-down fa-2x pull-right"></i>
					</div>
					<div class="panel-title-metadata">{{ today.critical_count }} critical
					</div>
                </div>
            </a>
            <!-- collapsy 2 content -->
            <div id="collapseTwo" class="panel-collapse collapse" aria-hidden="true">
                <div class="panel-body"> 
                    {{# each today.notices }}
                    <div class="notice-container {{ #unless is_read }}unread{{ /unless }}">
	                    <div class="inner-notice-container">
                            {{ #if is_critical }}
							<i class="fa fa-exclamation-triangle critical-icon"></i>
                            {{ /if }}
	                        <div class="notice-category">
	                            {{ category }}
	                        </div>
	                        <div class="notice-title">
	                            {{{ notice_content }}}
	                        </div>
	                    </div>
                    </div>
                    {{ /each }}
                </div>
            </div>
      </div>
        {{ /if }}
      <!-- end collapsy 2 -->
      
      {{ #if week.notices }}
       <!-- collapsy 3: this week -->
        <div class="panel panel-default">
            <!-- collapsy 3 header -->
            <a data-toggle="collapse"  href="#collapseThree" aria-controls="collapseThree">
                <div class="panel-heading clearfix">
                	<div class="pull-left">
	                    <h3 class="panel-title">This week (Week 4)</h3>
                	</div>
					<div class="pull-right">
                        {{ #if week.unread_count }}
						 <span class="badge">{{ week.unread_count }} unread</span>
                        {{ /if }}
                        <i class="fa fa-angle-down fa-2x pull-right"></i>

					</div>
					<div class="panel-title-metadata">{{ week.critical_count }} critical
					</div>
                </div>
            </a>
            <!-- collapsy 3 content -->
            <div id="collapseThree" class="panel-collapse collapse" aria-hidden="true">
                <div class="panel-body">
                    {{# each week.notices }}
                    <div class="notice-container {{ #unless is_read }}unread{{ /unless }}">
	                    <div class="inner-notice-container">
                            {{ #if is_critical }}
							<i class="fa fa-exclamation-triangle critical-icon"></i>
                            {{ /if }}
	                        <div class="notice-category">
	                            {{ category }}
	                        </div>
	                        <div class="notice-title">
	                            {{{ notice_content }}}
	                        </div>
	                    </div>
                    </div>
                    {{ /each }}
                </div>
            </div>
      </div>
        {{ /if }}
      <!-- end collapsy 3 -->

      {{ #if next_week.notices }}
       <!-- collapsy 4: next week -->
        <div class="panel panel-default">
            <!-- collapsy 4 header -->
            <a data-toggle="collapse"  href="#collapseFour" aria-controls="collapseFour">
                <div class="panel-heading clearfix">
                	<div class="pull-left">
	                    <h3 class="panel-title">Next week</h3>
                	</div>
					<div class="pull-right">
                        {{ #if next_week.unread_count }}
						 <span class="badge">{{ next_week.unread_count }} unread</span>
                        {{ /if }}
                        <i class="fa fa-angle-down fa-2x pull-right"></i>
					</div>
					<div class="panel-title-metadata">{{ next_week.critical_count }} critical
					</div>
                </div>
            </a>
            <!-- collapsy 4 content -->
            <div id="collapseFour" class="panel-collapse collapse" aria-hidden="true">
                <div class="panel-body">
                    {{# each next_week.notices }}
                    <div class="notice-container {{ #unless is_read }}unread{{ /unless }}">
	                    <div class="inner-notice-container unread-notice">
                            {{ #if is_critical }}
							<i class="fa fa-exclamation-triangle critical-icon"></i>
                            {{ /if }}
	                        <div class="notice-category">
	                            {{ category }}
	                        </div>
	                        <div class="notice-title">
	                            {{{ notice_content }}}
	                        </div>
	                    </div>
                    </div>
                    {{ /each }}
                </div>
            </div>
      </div>
        {{ /if }}
      <!-- end collapsy 4 -->

      {{ #if future.notices }}
      <!-- collapsy 5: future -->      
        <div class="panel panel-default">
            <!-- collapsy 5 header -->      
            <a data-toggle="collapse"  href="#collapseFive" aria-controls="collapseFive">
                <div class="panel-heading clearfix">
                	<div class="pull-left">
	                    <h3 class="panel-title">Upcoming weeks</h3>
                	</div>
					<div class="pull-right">
                        {{ #if future.unread_count }}
						 <span class="badge">{{ future.unread_count }} unread</span>
                        {{ /if }}
                        <i class="fa fa-angle-down fa-2x pull-right"></i>
					</div>
					<div class="panel-title-metadata">{{ future.critical_count }} critical
					</div>
                </div>
            </a>
            <!-- collapsy 5 content -->
            <div id="collapseFive" class="panel-collapse collapse" aria-hidden="true">
                <div class="panel-body"> 
                    {{# each future.notices }}
                    <div class="notice-container {{ #unless is_read }}unread{{ /unless }}">
	                    <div class="inner-notice-container">
	                        <div class="notice-category">
	                            {{ category }}
	                        </div>
	                        <div class="notice-title">
	                            {{{ notice_content }}}
	                        </div>
	                    </div>
                    </div>
                    {{ /each }}
                </div>
            </div>
      </div>
        {{ /if }}
      <!-- end collapsy 5 -->
      
      {{ #if legal.notices }}
        <!-- collapsy legal -->      
        <div class="panel panel-default">
            <!-- collapsy legal header -->      
            <a data-toggle="collapse"  href="#collapseSix" aria-controls="collapseSix">
                <div class="panel-heading clearfix">
                	<div class="pull-left">
	                    <h3 class="panel-title">Legal</h3>
                	</div>
					<div class="pull-right">
                        {{ #if legal.unread_count }}
						 <span class="badge">{{ legal.unread_count }} unread</span>
                        {{ /if }}
                        <i class="fa fa-angle-down fa-2x pull-right"></i>
					</div>
					<div class="panel-title-metadata">[variable: number of legal critical] critical
					</div>
                </div>
            </a>
            <!-- collapsy legal content -->
            <div id="collapseSix" class="panel-collapse collapse" aria-hidden="true">
                <div class="panel-body"> 
                    {{# each legal.notices }}
                    <div class="notice-container {{ #unless is_read }}unread{{ /unless }}">
	                    <div class="inner-notice-container">
	                        <div class="notice-category">
	                            {{ category }}
	                        </div>
	                        <div class="notice-title">
	                            {{{ notice_content }}}
	                        </div>
	                    </div>
                    </div>
                    {{ /each }}
                </div>
            </div>
      </div>
        {{ /if }}
      <!-- end collapsy legal -->
</div> 
<!-- end notices container  --> 
 
    {% endtplhandlebars %}
