{% load templatetag_handlebars %}
    {% tplhandlebars "reg_status_card" %}

<div id="RegStatusCard" class="card"  data-name="RegistrationCard" data-type="card" data-identifier="{{reg_next_quarter}}{{reg_next_year}}">
    <div class="fade-in">

        <h3>Registration: {{reg_next_quarter}} {{reg_next_year}}</h3>

        <div class="card-badge-container">
            <ul title="Registration Information" style="list-style-type: none; padding-left: 0;">
                {{#if hold_count}}
                    {{> reg_holds }}
                {{/if}}
            </ul>
        </div>

        <!-- <h4 class="sr-only">Registration Information</h4> -->
        <!-- not sure if we need this h4 here -->

        <!-- Estimated Registration Date -->
        <div class="card-badge-container">
            <ul class="card_list">
                {{#unless registration_is_open}}
                    {{> notice_est_reg_date }}
                {{/unless}}

                <li>
		    {{#if plan_data.courses}}
                        {{> show_plan_courses }}
		    {{else}}
                        {{> show_plan_without_courses }}
                    {{/if}}
		</li>
	    </ul>
        </div>

	<h4 class="sr-only">Registration Resources</h4>
	{{#unless registration_is_open}}
            {{> reg_not_open_resources }}
	{{/unless}}

	<!-- CHARLON: not sure why a clearfix wasn't working on the DIV below, but the inline style was... -->
	<span id="reg_resources_desc" class="sr-only">{{reg_next_quarter}} {{reg_next_year}} plan</span>
        <div id="reg_resources{{#if card}}_{{card}}{{/if}}"
             aria-labelledby="reg_resources_desc" aria-expanded="false"
             class="slide-hide reg_resources_disc" style="clear:both;" aria-hidden="true">
            <div class="myplan-data">
                {{#if plan_data.has_ready_courses}}
                    {{> reg_res_plan_courses }}
                {{/if}}

                {{#if plan_data.has_unready_courses}}
                    {{> reg_res_plan_unread_courses }}
                {{/if}}
            </div>

            {{> reg_resources }}
        </div>

        <div class="card-disclosure">
            {{#if plan_data.courses}}
                <span id="show_reg_resources_wrapper{{#if card}}_{{card}}{{/if}}">
                    <span id="show_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" class="sr-only">Expand to show additional registration resources</span>
                    <a class="show_reg_resources{{#if card}}_{{card}}{{/if}}" aria-controls="reg_resources"
                       aria-labelledby="show_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}"
                       href="#" title="Expand to show additional registration resources">Show {{reg_next_quarter}} {{reg_next_year}} plan</a>
                </span>
                <span id="hide_reg_resources_wrapper{{#if card}}_{{card}}{{/if}}" hidden aria-hidden="true">
                    <span id="hide_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" class="sr-only">Collapse to hide additional registration resources</span>
                    <a class="show_reg_resources{{#if card}}_{{card}}{{/if}}" aria-controls="reg_resources" aria-labelledby="hide_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" href="#" title="Collapse to hide additional registration resources">Hide {{reg_next_quarter}} {{reg_next_year}} plan</a>
                </span>

            {{else}}
                <span id="show_reg_resources_wrapper{{#if card}}_{{card}}{{/if}}">
                    <span id="show_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" class="sr-only">Expand to show additional registration resources</span>
                    <a class="show_reg_resources{{#if card}}_{{card}}{{/if}}" aria-controls="reg_resources" aria-labelledby="show_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" href="#" title="Expand to show additional registration resources">Show more</a>
                </span>
                <span id="hide_reg_resources_wrapper{{#if card}}_{{card}}{{/if}}" hidden aria-hidden="true">
                    <span id="hide_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" class="sr-only">Collapse to hide additional registration resources</span>
                    <a class="show_reg_resources{{#if card}}_{{card}}{{/if}}" aria-controls="reg_resources" aria-labelledby="hide_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" href="#" title="Collapse to hide additional registration resources">Show less</a>
                </span>
            {{/if}}
        </div>

    </div>
</div>

{% endtplhandlebars %}
