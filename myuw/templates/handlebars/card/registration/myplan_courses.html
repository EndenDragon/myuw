{% load templatetag_handlebars %}
    {% tplhandlebars "myplan_courses_tmpl" %}

{{#if plan_data.courses}}
    <div id="reg_resources{{#if card}}_{{card}}{{/if}}"
         aria-labelledby="reg_resources_desc" aria-expanded="false"
         class="slide-hide reg_resources_disc" style="clear:both;"
         aria-hidden="true">
        <!-- CHARLON: not sure why a clearfix wasn't working on the DIV below,
             but the inline style was... -->

        <h4 class="quarter-heading">Your {{reg_next_quarter}} {{ reg_next_year }} plan</h4>

        <div class="myplan-data">
            {{#if plan_data.has_ready_courses}}
                <div class="card-badge-label">

                    <h5>Ready for registration</h5>

                    {{ #each plan_data.courses }} <!--Course-->
                        {{ #if registrations_available }}
                            {{ curriculum_abbr }} {{ course_number }}

                            <table class="reg-status-table table table-condensed borderless" style="border-width: 0;">
                                <thead class="sr-only">
                                    <tr>
                                        <td>Section</td>
                                        <td>Day</td>
                                        <td>Time</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{ #each sections }} <!--Section-->
                                         <tr class="reg-status-table-row">
                                             <td>{{ section_id }}</td>

                                             {{#each section_data.meetings}}
                                                  {{#if days_tbd }}
                                                      Days and times to be arranged<br/>
                                                  {{else}}
                                                      <td>
                                                          {{#if meeting_days.monday}}<abbr title="Monday">M</abbr>{{/if}}{{#if
                                                          meeting_days.tuesday}}<abbr title="Tuesday">T</abbr>{{/if}}{{#if
                                                          meeting_days.wednesday}}<abbr title="Wednesday">W</abbr>{{/if}}{{#if
                                                          meeting_days.thursday}}<abbr title="Thursday">Th</abbr>{{/if}}{{#if
                                                          meeting_days.friday}}<abbr title="Friday">F</abbr>{{/if}}{{#if
                                                          meeting_days.saturday}}<abbr title="Saturday">Sa</abbr>{{/if}}{{#if
                                                          meeting_days.sunday}}<abbr title="Sunday">Su</abbr>{{/if}}
                                                      </td>
                                                      <td>{{formatTime start_time}} - {{formatTimeAMPM end_time}}</td>
                                                  {{/if}}
                                              {{/each}}
                                         </tr>
                                     {{ /each }} <!--Section end-->
                                </tbody>
                            </table>
                        {{/if}}
                    {{/each}} <!--Course end-->
                </div>
            {{/if}} <!-- has_ready_courses end-->

            {{#if plan_data.has_unready_courses}}
                 <div class="card-badge-label">
                     <h5>Not ready for registration</h5>
                     {{ #each plan_data.courses }}
                         {{ #unless registrations_available }}
                             {{ curriculum_abbr }} {{ course_number }} <br />
                         {{ /unless }}
                     {{ /each}}
                 </div>
            {{/if}}
        </div>
    </div>

    <div class="card-disclosure">
        <span id="show_reg_resources_wrapper{{#if card}}_{{card}}{{/if}}">
            <span id="show_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}"
                  class="sr-only">Expand to show additional registration resources</span>
            <a class="show_reg_resources{{#if card}}_{{card}}{{/if}}" aria-controls="reg_resources"
               aria-labelledby="show_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}"
               href="#" title="Expand to show {{reg_next_quarter}} {{reg_next_year}} plan">Show {{reg_next_quarter}} {{reg_next_year}} plan</a>
        </span>
        <span id="hide_reg_resources_wrapper{{#if card}}_{{card}}{{/if}}" hidden aria-hidden="true">
            <span id="hide_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" class="sr-only">Collapse to hide additional registration resources</span>
            <a class="show_reg_resources{{#if card}}_{{card}}{{/if}}" aria-controls="reg_resources" aria-labelledby="hide_plan_reg_resources_label{{#if card}}_{{card}}{{/if}}" href="#" title="Collapse to hide {{reg_next_quarter}} {{reg_next_year}} plan">Hide {{reg_next_quarter}} {{reg_next_year}} plan</a>
        </span>
    </div>
{{/if}}

{% endtplhandlebars %}
