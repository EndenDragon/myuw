{% load templatetag_handlebars %}
{% tplhandlebars "request_email_lists_tmpl" %}

<div class="card">
    <h3>Create Mailing List</h3>

    <form id="emaillist{{course_abbr}}{{course_number}}{{section_id}}" method="POST" action="{% url 'myuw_emaillist_api' %}">{% csrf_token %}
    <div>
        <button type="submit" form="emaillist{{course_abbr}}{{course_number}}{{section_id}}" value="Create Mailing Lists">Create Mailing Lists</button>
    </div>

    <div>{{ course_abbr }} {{course_number}} {{section_id}}</div>
    <div>{{ capitalizeString quarter }} {{ year }}</div>

    <ul class="">
        <li class="section_single">
            <label for="section_single_label">Creates a single list for this section: {{section_list.list_address}}@uw.edu</label>
            <input type="hidden" id="section_single_label" name="section_single_label" value="{{section_list.section_label}}"/>
            Stays synced with the official class list
        </li>

    {{#if is_primary}}
        {{#if has_multi_secondaries }}
        <li>
            <p>Creates multiple email lists, one for each section selected</p>
            <fieldset>
            <div>
                <label>Select all</label> <input type="checkbox"/>
            </div>
            <ul>
                {{#each secondary_lists}}
                <li class="secondary_single">
                    {{#unless list_exists}}
                        <label for="secondary_single_{{ list_address }}">
                        {{ list_address }}@uw.edu
                        </label>
                        <input type="checkbox" id="secondary_single_{{list_address}}" name="secondary_single_{{list_address}}" value="{{section_label}}" />
                    {{else}}
                        <span>{{list_address}}@uw.edu</span>
                    {{/unless}}
                </li>
            
                {{/each}}
            </ul>
            </fieldset>
        </li>
    {{/if}}
{{/if}}
    </ul>

    </form>
</div>

{% endtplhandlebars %}
